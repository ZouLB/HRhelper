webpackJsonp([5],{"24xY":function(t,e){},R65K:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("LOkV"),l=a("sDdn"),n=a("P9l9"),s={data:function(){return{table_title:null,filters:{name:"",depart:"",date:"",recruit:""},tableData:[],pickerOptions2:{shortcuts:[{text:"今天",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()),t.$emit("pick",[a,e])}},{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}}]},listLoading:!1,currentRow:null,tableSelect:[],total:100,page:1,pageSize:20,currentPage:1,detailShow:!1,selectedEmail:null,special:null,principal:"",title:["试用期转正","合同续签","绩效表填写","新员工入职提醒","年限贺卡提醒","工作年限贺卡"],startTime:"",endTime:"",approve:""}},methods:{handleCurrentChange:function(t){this.currentRow=t},handleSelectionChange:function(t){this.tableSelect=t},$_initialize:function(){var t=this.$route.params.id;this.table_title=this.title[t-1],this.sortId=this.$route.params.id,this.special=this.$route.params.isSpecial,this.$_getData()},$_checkDetail:function(t){this.detailShow=!0,this.selectedEmail=t},$_onBack:function(t){this.detailShow=!1,this.$_getData()},$_getData:function(){var t=this,e={pageNum:this.page,pageSize:this.pageSize,status:1,isSpecial:this.special,operationId:this.sortId,employeeName:this.filters.name,department:this.filters.depart,recruitClass:this.filters.recruit};null!=this.filters.date&&""!=this.filters.date?(this.startTime=i.a.formatDate.format(this.filters.date[0],"yyyy-MM-dd"),this.endTime=i.a.formatDate.format(this.filters.date[1],"yyyy-MM-dd"),"合同续签"==this.table_title?(e.contractDayStart=this.startTime,e.contractDayEnd=this.endTime):"试用期转正"==this.table_title?(e.planFullmenberDayStart=this.startTime,e.planFullmenberDayEnd=this.endTime):(e.entryDayStart=this.startTime,e.entryDayEnd=this.endTime)):"合同续签"==this.table_title?(e.contractDayStart="",e.contractDayEnd=""):"试用期转正"==this.table_title?(e.planFullmenberDayStart="",e.planFullmenberDayEnd=""):(e.entryDayStart="",e.entryDayEnd=""),this.listLoading=!0,Object(n.h)(e).then(function(e){t.total=e.resultEntity.total,t.tableData=e.resultEntity.list,e.resultEntity&&e.resultEntity.list.length>0&&(t.principal=e.resultEntity.list[0].principal),console.log(e.resultEntity.list),t.listLoading=!1})},$_del:function(t,e){var a=this;this.$confirm("删除后将不能恢复，确认删除邮件吗?","提示",{type:"warning"}).then(function(){a.listLoading=!0;var t={mailId:e.id};Object(n.l)(t).then(function(t){a.listLoading=!1,a.$message({message:"删除成功",type:"success"}),a.$_getData()})}).catch(function(){})},$_batchDel:function(){var t=this;if(0!=this.tableSelect.length){var e=this.tableSelect.map(function(t){return t.id}).toString();this.$confirm("删除后将不能恢复，确认删除所选邮件吗?","提示",{type:"warning"}).then(function(){t.listLoading=!0;var a={mailIds:e};Object(n.c)(a).then(function(e){t.listLoading=!1,t.$message({message:"删除成功",type:"success"}),t.$_getData()})}).catch(function(){})}else this.$alert("请选择需要删除的邮件","提示",{confirmButtonText:"确定",type:"info"})},handleCurrent:function(t){this.currentPage=t,this.page=t,this.$_getData()},handleSizeChange:function(t){this.pageSize=t,this.$_getData()}},mounted:function(){this.$_initialize()},watch:{$route:function(t,e){this.$_initialize(),this.detailShow=!1},table_title:function(){this.filters.name="",this.filters.depart="",this.filters.date="",this.filters.recruit="",this.$_initialize()}},components:{emailDetail:l.a}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[t.detailShow?t._e():a("div",[a("div",{staticClass:"head clearfix"},[a("span",[t._v("已发送文件"),a("i",{staticClass:"el-icon-arrow-right"}),t._v(t._s(t.table_title))]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"}},[t._v("导出")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small",plain:""},on:{click:t.$_batchDel}},[t._v("删除")]),t._v(" "),a("el-button",{staticClass:"search",attrs:{type:"primary",size:"small",plain:""},on:{click:function(e){t.$_getData()}}},[t._v("搜索")]),t._v(" "),a("el-input",{attrs:{placeholder:"员工姓名",clearable:"",size:"small"},model:{value:t.filters.name,callback:function(e){t.$set(t.filters,"name",e)},expression:"filters.name"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),t._v(" "),"合同续签"!=t.table_title?a("el-input",{attrs:{placeholder:"所属部门",clearable:"",size:"small"},model:{value:t.filters.depart,callback:function(e){t.$set(t.filters,"depart",e)},expression:"filters.depart"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]):t._e(),t._v(" "),a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions2},model:{value:t.filters.date,callback:function(e){t.$set(t.filters,"date",e)},expression:"filters.date"}}),t._v(" "),"绩效表填写"==t.table_title?a("el-select",{attrs:{clearable:"",placeholder:"招聘类型"},model:{value:t.filters.recruit,callback:function(e){t.$set(t.filters,"recruit",e)},expression:"filters.recruit"}},[a("el-option",{attrs:{label:"社招",value:"社招"}}),t._v(" "),a("el-option",{attrs:{label:"校招",value:"校招"}})],1):t._e()],1),t._v(" "),a("div",{staticClass:"content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"highlight-current-row":"",stripe:"",border:"",size:"mini","tooltip-effect":"dark"},on:{"current-change":t.handleCurrentChange,"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{property:"employeeName",label:"员工姓名",width:"80","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{property:"department",label:"所属部门","show-overflow-tooltip":"",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{property:"entryDay",label:"入职时间","show-overflow-tooltip":"",sortable:""}}),t._v(" "),"试用期转正"==t.table_title?a("el-table-column",{attrs:{property:"planFullmenberDay",label:"拟转正时间",width:"115","show-overflow-tooltip":"",sortable:""}}):t._e(),t._v(" "),"绩效表填写"==t.table_title?a("el-table-column",{attrs:{property:"recruitClass",label:"招聘类型","show-overflow-tooltip":"",sortable:""}}):t._e(),t._v(" "),"合同续签"==t.table_title?a("el-table-column",{attrs:{property:"contractDay",label:"合同结束日期",width:"130","show-overflow-tooltip":"",sortable:""}}):t._e(),t._v(" "),a("el-table-column",{attrs:{property:"mailName",label:"邮件主题","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{property:"recipient",label:"收件人",width:"80","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{property:"copyPeople",label:"抄送人",width:"80","show-overflow-tooltip":""}}),t._v(" "),"试用期转正"==t.table_title?a("el-table-column",{attrs:{property:"approveStatus",label:"审核状态",width:"80","show-overflow-tooltip":""}}):t._e(),t._v(" "),a("el-table-column",{attrs:{property:"sendTime",label:"发送时间","show-overflow-tooltip":"",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",property:"opera",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-hr-mail",attrs:{title:"查看邮件"},on:{click:function(a){t.$_checkDetail(e.row)}}}),t._v(" "),a("i",{staticClass:"el-icon-delete",attrs:{title:"删除"},on:{click:function(a){t.$_del(e.$index,e.row)}}})]}}])})],1)],1),t._v(" "),a("div",{staticClass:"footer"},[a("span",[t._v("接口人："+t._s(t.principal))]),t._v(" "),a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total,sizes, prev, pager, next","current-page":t.currentPage,"page-sizes":[20,50,100],total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrent,"update:currentPage":function(e){t.currentPage=e}}})],1)]),t._v(" "),a("transition",{attrs:{name:"fade",mode:"out-in"}},[t.detailShow?a("div",{staticClass:"em-detail child-view"},[a("email-detail",{attrs:{"email-item":t.selectedEmail},on:{"update:emailItem":function(e){t.selectedEmail=e},"on-back":t.$_onBack}})],1):t._e()])],1)},staticRenderFns:[]};var o=a("vSla")(s,r,!1,function(t){a("YDa7")},"data-v-9ef52894",null);e.default=o.exports},YDa7:function(t,e){},sDdn:function(t,e,a){"use strict";var i=a("P9l9"),l={data:function(){return{loading:!1}},props:{emailItem:{type:Object,default:null}},methods:{$_onBack:function(){this.$emit("on-back",null)},$_del:function(t){var e=this;this.$confirm("删除后将不能恢复，确认删除该邮件吗?","提示",{type:"warning"}).then(function(){console.log(t),e.loading=!0;var a={mailId:t};Object(i.l)(a).then(function(t){e.loading=!1,e.$message({message:"删除成功",type:"success"})}),e.$_onBack()}).catch(function(){})},$_cancel:function(t){var e=this;this.$confirm("取消后将不能恢复，确认取消发送吗?","提示",{type:"warning"}).then(function(){e.loading=!0;var a={mailId:t};Object(i.d)(a).then(function(t){e.loading=!1,e.$message({message:"取消成功",type:"success"})}),e.$_onBack()}).catch(function(){})},handleCurrent:function(t){this.currentPage=t,this.page=t},handleSizeChange:function(t){this.pageSize=t}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"head clearfix"},[a("span",[t._v("邮件详情")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:t.$_onBack}},[t._v("返回")]),t._v(" "),1==t.emailItem.isSent?a("el-button",{attrs:{type:"danger",size:"small",plain:"",loading:t.loading},on:{click:function(e){t.$_del(t.emailItem.id)}}},[t._v("删除")]):t._e(),t._v(" "),0==t.emailItem.isSent?a("el-button",{attrs:{type:"danger",size:"small",plain:"",loading:t.loading},on:{click:function(e){t.$_cancel(t.emailItem.id)}}},[t._v("取消发送")]):t._e()],1),t._v(" "),a("div",{staticClass:"message"},[a("h3",[t._v(t._s(t.emailItem.mailName))]),t._v(" "),a("ul",[a("li",[t._v("收件人："+t._s(t.emailItem.recipient)+"<"+t._s(t.emailItem.recipientAddress)+">")]),t._v(" "),a("li",[t._v("时间："+t._s(t.emailItem.sendTime||t.emailItem.planSendTime))]),t._v(" "),a("li",[t._v("附件：")])])]),t._v(" "),a("div",{staticClass:"letter-box"},[a("div",{staticClass:"letter-border"},[a("p",{domProps:{innerHTML:t._s(t.emailItem.mailContent)}})])])])},staticRenderFns:[]};var s=a("vSla")(l,n,!1,function(t){a("24xY")},"data-v-80d3d078",null);e.a=s.exports}});