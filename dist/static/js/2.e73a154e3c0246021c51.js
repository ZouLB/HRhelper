webpackJsonp([2],{"7p3N":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},"8Nvm":function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},"93K8":function(t,e,n){var i=n("8Nvm");t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},AKd3:function(t,e){var n=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},BRDz:function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},BplH:function(t,e,n){var i=n("8Nvm"),a=n("C02x").document,r=i(a)&&i(a.createElement);t.exports=function(t){return r?a.createElement(t):{}}},C02x:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},FITv:function(t,e,n){var i=n("C02x"),a=n("AKd3"),r=n("WwGG"),l=n("bHZz"),o=n("Mcur"),s=function(t,e,n){var c,u,f,p=t&s.F,d=t&s.G,h=t&s.S,m=t&s.P,v=t&s.B,g=t&s.W,_=d?a:a[e]||(a[e]={}),b=_.prototype,y=d?i:h?i[e]:(i[e]||{}).prototype;for(c in d&&(n=e),n)(u=!p&&y&&void 0!==y[c])&&o(_,c)||(f=u?y[c]:n[c],_[c]=d&&"function"!=typeof y[c]?n[c]:v&&u?r(f,i):g&&y[c]==f?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):m&&"function"==typeof f?r(Function.call,f):f,m&&((_.virtual||(_.virtual={}))[c]=f,t&s.R&&b&&!b[c]&&l(b,c,f)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},J35F:function(t,e,n){var i=n("8Nvm");t.exports=function(t,e){if(!i(t))return t;var n,a;if(e&&"function"==typeof(n=t.toString)&&!i(a=n.call(t)))return a;if("function"==typeof(n=t.valueOf)&&!i(a=n.call(t)))return a;if(!e&&"function"==typeof(n=t.toString)&&!i(a=n.call(t)))return a;throw TypeError("Can't convert object to primitive value")}},JhHb:function(t,e,n){n("SAFe");var i=n("AKd3").Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},LOkV:function(t,e,n){"use strict";var i=/([yMdhsm])(\1*)/g;function a(t,e){e-=(t+"").length;for(var n=0;n<e;n++)t="0"+t;return t}e.a={getQueryStringByName:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(e),i="";return null!=n&&(i=n[2]),e=null,n=null,null==i||""==i||"undefined"==i?"":i},formatDate:{format:function(t,e){return(e=e||"yyyy-MM-dd").replace(i,function(e){switch(e.charAt(0)){case"y":return a(t.getFullYear(),e.length);case"M":return a(t.getMonth()+1,e.length);case"d":return a(t.getDate(),e.length);case"w":return t.getDay()+1;case"h":return a(t.getHours(),e.length);case"m":return a(t.getMinutes(),e.length);case"s":return a(t.getSeconds(),e.length)}})},parse:function(t,e){var n=e.match(i),a=t.match(/(\d)+/g);if(n.length==a.length){for(var r=new Date(1970,0,1),l=0;l<n.length;l++){var o=parseInt(a[l]);switch(n[l].charAt(0)){case"y":r.setFullYear(o);break;case"M":r.setMonth(o-1);break;case"d":r.setDate(o);break;case"h":r.setHours(o);break;case"m":r.setMinutes(o);break;case"s":r.setSeconds(o)}}return r}return null}}}},Mcur:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},MqFF:function(t,e){},QpRb:function(t,e){},SAFe:function(t,e,n){var i=n("FITv");i(i.S+i.F*!n("sjnA"),"Object",{defineProperty:n("lIiZ").f})},SS50:function(t,e,n){t.exports=!n("sjnA")&&!n("BRDz")(function(){return 7!=Object.defineProperty(n("BplH")("div"),"a",{get:function(){return 7}}).a})},WwGG:function(t,e,n){var i=n("7p3N");t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,a){return t.call(e,n,i,a)}}return function(){return t.apply(e,arguments)}}},a3Yh:function(t,e,n){"use strict";e.__esModule=!0;var i,a=n("liLe"),r=(i=a)&&i.__esModule?i:{default:i};e.default=function(t,e,n){return e in t?(0,r.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},bHZz:function(t,e,n){var i=n("lIiZ"),a=n("go9Q");t.exports=n("sjnA")?function(t,e,n){return i.f(t,e,a(1,n))}:function(t,e,n){return t[e]=n,t}},go9Q:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},lIiZ:function(t,e,n){var i=n("93K8"),a=n("SS50"),r=n("J35F"),l=Object.defineProperty;e.f=n("sjnA")?Object.defineProperty:function(t,e,n){if(i(t),e=r(e,!0),i(n),a)try{return l(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},liLe:function(t,e,n){t.exports={default:n("JhHb"),__esModule:!0}},sDdn:function(t,e,n){"use strict";var i=n("P9l9"),a={data:function(){return{loading:!1}},props:{emailItem:{type:Object,default:null}},methods:{$_onBack:function(){this.$emit("on-back",null)},$_del:function(t){var e=this;this.$confirm("删除后将不能恢复，确认删除该邮件吗?","提示",{type:"warning"}).then(function(){console.log(t),e.loading=!0;var n={mailId:t};Object(i.p)(n).then(function(t){e.loading=!1,e.$message({message:"删除成功",type:"success"})}),e.$_onBack()}).catch(function(){})},$_cancel:function(t){var e=this;this.$confirm("取消后将不能恢复，确认取消发送吗?","提示",{type:"warning"}).then(function(){e.loading=!0;var n={mailId:t};Object(i.e)(n).then(function(t){e.loading=!1,e.$message({message:"取消成功",type:"success"})}),e.$_onBack()}).catch(function(){})},handleCurrent:function(t){this.currentPage=t,this.page=t},handleSizeChange:function(t){this.pageSize=t}}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"head clearfix"},[n("span",[t._v("邮件详情")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:t.$_onBack}},[t._v("返回")]),t._v(" "),1==t.emailItem.isSent?n("el-button",{attrs:{type:"danger",size:"small",plain:"",loading:t.loading},on:{click:function(e){t.$_del(t.emailItem.id)}}},[t._v("删除")]):t._e(),t._v(" "),0==t.emailItem.isSent?n("el-button",{attrs:{type:"danger",size:"small",plain:"",loading:t.loading},on:{click:function(e){t.$_cancel(t.emailItem.id)}}},[t._v("取消发送")]):t._e()],1),t._v(" "),n("div",{staticClass:"message"},[n("h3",[t._v(t._s(t.emailItem.mailName))]),t._v(" "),n("ul",[n("li",[t._v("收件人："+t._s(t.emailItem.recipient)+"<"+t._s(t.emailItem.recipientAddress)+">")]),t._v(" "),n("li",[t._v("时间："+t._s(t.emailItem.sendTime||t.emailItem.planSendTime))]),t._v(" "),n("li",[t._v("附件：")])])]),t._v(" "),n("div",{staticClass:"letter-box"},[n("div",{staticClass:"letter-border"},[n("p",{domProps:{innerHTML:t._s(t.emailItem.mailContent)}})])])])},staticRenderFns:[]};var l=n("C7Lr")(a,r,!1,function(t){n("QpRb")},"data-v-46942b77",null);e.a=l.exports},sWeL:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("a3Yh"),a=n.n(i),r=n("LOkV"),l=n("sDdn"),o=n("P9l9"),s={data:function(){var t;return t={table_title:null,listLoading:!1,filters:{name:"",depart:"",date:"",recruit:""},tableData:[],pickerOptions2:{shortcuts:[{text:"明天",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()+864e5),e.setTime(n.getTime()),t.$emit("pick",[n,e])}},{text:"后两天",onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()+864e5),e.setTime(n.getTime()+864e5),t.$emit("pick",[n,e])}}]}},a()(t,"listLoading",!1),a()(t,"currentRow",null),a()(t,"tableSelect",[]),a()(t,"total",100),a()(t,"page",1),a()(t,"pageSize",20),a()(t,"currentPage",1),a()(t,"detailShow",!1),a()(t,"selectedEmail",null),a()(t,"special",null),a()(t,"principal",""),a()(t,"title",["试用期转正","合同续签","绩效表填写","新员工入职提醒","年限贺卡提醒","工作年限贺卡"]),a()(t,"startTime",""),a()(t,"endTime",""),t},methods:{handleCurrentChange:function(t){this.currentRow=t},handleSelectionChange:function(t){this.tableSelect=t},$_checkDetail:function(t){this.detailShow=!0,this.selectedEmail=t},$_onBack:function(t){this.detailShow=!1,this.$_getData()},$_initialize:function(){var t=this,e=this.$route.params.id;getMenuList().then(function(e){t.title=e.data.resultEntity});var n=this.title.findIndex(function(t){return t.id==e});this.table_title=this.title[n].operationName,this.sortId=this.$route.params.id,this.special=this.$route.params.isSpecial,this.$_getData()},$_getData:function(){var t=this,e={pageNum:this.page,pageSize:this.pageSize,status:0,isSpecial:this.special,operationId:this.sortId,employeeName:this.filters.name,department:this.filters.depart,recruitClass:this.filters.recruit};null!=this.filters.date&&""!=this.filters.date?(this.startTime=r.a.formatDate.format(this.filters.date[0],"yyyy-MM-dd"),this.endTime=r.a.formatDate.format(this.filters.date[1],"yyyy-MM-dd"),"合同续签"==this.table_title?(e.contractDayStart=this.startTime,e.contractDayEnd=this.endTime):"试用期转正"==this.table_title?(e.planFullmenberDayStart=this.startTime,e.planFullmenberDayEnd=this.endTime):(e.entryDayStart=this.startTime,e.entryDayEnd=this.endTime)):"合同续签"==this.table_title?(e.contractDayStart="",e.contractDayEnd=""):"试用期转正"==this.table_title?(e.planFullmenberDayStart="",e.planFullmenberDayEnd=""):(e.entryDayStart="",e.entryDayEnd=""),this.listLoading=!0,Object(o.k)(e).then(function(e){t.total=e.resultEntity.total,t.tableData=e.resultEntity.list,e.resultEntity&&e.resultEntity.list.length>0&&(t.principal=e.resultEntity.list[0].principal),console.log(e.resultEntity.list),t.listLoading=!1})},$_cancel:function(t,e){var n=this;this.$confirm("取消后将不能恢复，确认取消发送吗?","提示",{type:"warning"}).then(function(){n.listLoading=!0;var t={mailId:e.id};Object(o.e)(t).then(function(t){n.listLoading=!1,n.$message({message:"取消成功",type:"success"}),n.$_getData()})}).catch(function(){})},$_batchCancel:function(){var t=this;if(0!=this.tableSelect.length){var e=this.tableSelect.map(function(t){return t.id}).toString();this.$confirm("取消后将不能恢复，确认取消发送所选邮件吗?","提示",{type:"warning"}).then(function(){t.listLoading=!0;var n={mailIds:e};Object(o.c)(n).then(function(e){t.listLoading=!1,t.$message({message:"取消发送成功",type:"success"}),t.$_getData()})}).catch(function(){})}else this.$alert("请选择需要取消发送的邮件","提示",{confirmButtonText:"确定",type:"info"})},handleCurrent:function(t){this.currentPage=t,this.page=t,this.$_getData()},handleSizeChange:function(t){this.pageSize=t,this.$_getData()}},mounted:function(){this.$_initialize()},watch:{$route:function(t,e){this.$_initialize(),this.detailShow=!1},table_title:function(){this.filters.name="",this.filters.depart="",this.filters.date="",this.filters.recruit="",this.$_initialize()}},components:{emailDetail:l.a}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[t.detailShow?t._e():n("div",[n("div",{staticClass:"head clearfix"},[n("span",[t._v("待发送文件"),n("i",{staticClass:"el-icon-arrow-right"}),t._v(t._s(t.table_title))]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small"}},[t._v("导出")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"small",plain:""},on:{click:t.$_batchCancel}},[t._v("取消发送")]),t._v(" "),n("el-button",{staticClass:"search",attrs:{type:"primary",size:"small",plain:""},on:{click:function(e){t.$_getData()}}},[t._v("搜索")]),t._v(" "),n("el-input",{attrs:{placeholder:"员工姓名",clearable:"",size:"small"},model:{value:t.filters.name,callback:function(e){t.$set(t.filters,"name",e)},expression:"filters.name"}},[n("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),t._v(" "),"合同续签"!=t.table_title?n("el-input",{attrs:{placeholder:"所属部门",clearable:"",size:"small"},model:{value:t.filters.depart,callback:function(e){t.$set(t.filters,"depart",e)},expression:"filters.depart"}},[n("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]):t._e(),t._v(" "),n("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions2},model:{value:t.filters.date,callback:function(e){t.$set(t.filters,"date",e)},expression:"filters.date"}}),t._v(" "),"绩效表填写"==t.table_title?n("el-select",{attrs:{clearable:"",placeholder:"招聘类型"},model:{value:t.filters.recruit,callback:function(e){t.$set(t.filters,"recruit",e)},expression:"filters.recruit"}},[n("el-option",{attrs:{label:"社招",value:"社招"}}),t._v(" "),n("el-option",{attrs:{label:"校招",value:"校招"}})],1):t._e()],1),t._v(" "),n("div",{staticClass:"content"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"highlight-current-row":"",stripe:"",border:"",size:"mini","tooltip-effect":"dark"},on:{"current-change":t.handleCurrentChange,"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{property:"employeeName",label:"员工姓名",width:"80","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{property:"department",label:"所属部门","show-overflow-tooltip":"",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{property:"entryDay",label:"入职时间","show-overflow-tooltip":"",sortable:""}}),t._v(" "),"试用期转正"==t.table_title?n("el-table-column",{attrs:{property:"planFullmenberDay",label:"拟转正时间",width:"130","show-overflow-tooltip":"",sortable:""}}):t._e(),t._v(" "),"绩效表填写"==t.table_title?n("el-table-column",{attrs:{property:"recruitClass",label:"招聘类型","show-overflow-tooltip":"",sortable:""}}):t._e(),t._v(" "),"合同续签"==t.table_title?n("el-table-column",{attrs:{property:"contractDay",label:"合同结束日期",width:"130","show-overflow-tooltip":"",sortable:""}}):t._e(),t._v(" "),n("el-table-column",{attrs:{property:"mailName",label:"邮件主题","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{property:"recipient",label:"收件人","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{property:"copyPeople",label:"抄送人","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{property:"planSendTime",label:"发送时间",width:"145","show-overflow-tooltip":"",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",property:"opera",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("i",{staticClass:"el-icon-hr-mail",attrs:{title:"查看邮件"},on:{click:function(n){t.$_checkDetail(e.row)}}}),t._v(" "),n("i",{staticClass:"el-icon-hr-cancel",attrs:{title:"取消发送"},on:{click:function(n){t.$_cancel(e.$index,e.row)}}})]}}])})],1)],1),t._v(" "),n("div",{staticClass:"footer"},[n("span",[t._v("接口人："+t._s(t.principal))]),t._v(" "),n("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total,sizes, prev, pager, next","current-page":t.currentPage,"page-sizes":[20,50,100],total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrent,"update:currentPage":function(e){t.currentPage=e}}})],1)]),t._v(" "),n("transition",{attrs:{name:"fade",mode:"out-in"}},[t.detailShow?n("div",{staticClass:"em-detail child-view"},[n("email-detail",{attrs:{"email-item":t.selectedEmail},on:{"update:emailItem":function(e){t.selectedEmail=e},"on-back":t.$_onBack}})],1):t._e()])],1)},staticRenderFns:[]};var u=n("C7Lr")(s,c,!1,function(t){n("MqFF")},"data-v-159ae43e",null);e.default=u.exports},sjnA:function(t,e,n){t.exports=!n("BRDz")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})}});